(()=>{var te=Object.create;var G=Object.defineProperty;var ne=Object.getOwnPropertyDescriptor;var oe=Object.getOwnPropertyNames;var re=Object.getPrototypeOf,ae=Object.prototype.hasOwnProperty;var ie=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);var se=(t,n,i,u)=>{if(n&&typeof n=="object"||typeof n=="function")for(let c of oe(n))!ae.call(t,c)&&c!==i&&G(t,c,{get:()=>n[c],enumerable:!(u=ne(n,c))||u.enumerable});return t};var le=(t,n,i)=>(i=t!=null?te(re(t)):{},se(n||!t||!t.__esModule?G(i,"default",{value:t,enumerable:!0}):i,t));var z=ie(L=>{var Ee=function(){"use strict";let t="1.1.0";function n(e){alert(`Mod ERROR:
`+e);let a=new Error(e);throw console.error(a),a}let i=new TextEncoder;function u(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function c(e){let a=new Set;return e.filter(r=>!a.has(r)&&a.add(r))}let y=new Map,f=new Set;function E(e){f.has(e)||(f.add(e),console.warn(e))}function C(e){let a=[],r=new Map,s=new Set;for(let p of I.values()){let m=p.patching.get(e.name);if(m){a.push(...m.hooks);for(let[l,o]of m.patches.entries())r.has(l)&&r.get(l)!==o&&E(`ModSDK: Mod '${p.name}' is patching function ${e.name} with same pattern that is already applied by different mod, but with different pattern:
Pattern:
${l}
Patch1:
${r.get(l)||""}
Patch2:
${o}`),r.set(l,o),s.add(p.name)}}a.sort((p,m)=>m.priority-p.priority);let v=function(p,m){if(m.size===0)return p;let l=p.toString().replaceAll(`\r
`,`
`);for(let[o,d]of m.entries())l.includes(o)||E(`ModSDK: Patching ${p.name}: Patch ${o} not applied`),l=l.replaceAll(o,d);return(0,eval)(`(${l})`)}(e.original,r),S=function(p){var m,l;let o=(l=(m=F.errorReporterHooks).hookChainExit)===null||l===void 0?void 0:l.call(m,e.name,s),d=v.apply(this,p);return o?.(),d};for(let p=a.length-1;p>=0;p--){let m=a[p],l=S;S=function(o){var d,h;let b=(h=(d=F.errorReporterHooks).hookEnter)===null||h===void 0?void 0:h.call(d,e.name,m.mod),w=m.hook.apply(this,[o,T=>{if(arguments.length!==1||!Array.isArray(o))throw new Error(`Mod ${m.mod} failed to call next hook: Expected args to be array, got ${typeof T}`);return l.call(this,T)}]);return b?.(),w}}return{hooks:a,patches:r,patchesSources:s,enter:S,final:v}}function k(e,a=!1){let r=y.get(e);if(r)a&&(r.precomputed=C(r));else{let s=window,v=e.split(".");for(let l=0;l<v.length-1;l++)if(s=s[v[l]],!u(s))throw new Error(`ModSDK: Function ${e} to be patched not found; ${v.slice(0,l+1).join(".")} is not object`);let S=s[v[v.length-1]];if(typeof S!="function")throw new Error(`ModSDK: Function ${e} to be patched not found`);let p=function(l){let o=-1;for(let d of i.encode(l)){let h=255&(o^d);for(let b=0;b<8;b++)h=1&h?-306674912^h>>>1:h>>>1;o=o>>>8^h}return((-1^o)>>>0).toString(16).padStart(8,"0").toUpperCase()}(S.toString().replaceAll(`\r
`,`
`)),m={name:e,original:S,originalHash:p};r=Object.assign(Object.assign({},m),{precomputed:C(m),router:()=>{},context:s,contextProperty:v[v.length-1]}),r.router=function(l){return function(...o){return l.precomputed.enter.apply(this,[o])}}(r),y.set(e,r),s[r.contextProperty]=r.router}return r}function M(){let e=new Set;for(let a of I.values())for(let r of a.patching.keys())e.add(r);for(let a of y.keys())e.add(a);for(let a of e)k(a,!0)}function x(){let e=new Map;for(let[a,r]of y)e.set(a,{name:a,original:r.original,originalHash:r.originalHash,sdkEntrypoint:r.router,currentEntrypoint:r.context[r.contextProperty],hookedByMods:c(r.precomputed.hooks.map(s=>s.mod)),patchedByMods:Array.from(r.precomputed.patchesSources)});return e}let I=new Map;function j(e){I.get(e.name)!==e&&n(`Failed to unload mod '${e.name}': Not registered`),I.delete(e.name),e.loaded=!1,M()}function Q(e,a,r){typeof e=="string"&&typeof a=="string"&&(alert(`Mod SDK warning: Mod '${e}' is registering in a deprecated way.
It will work for now, but please inform author to update.`),e={name:e,fullName:e,version:a},a={allowReplace:r===!0}),e&&typeof e=="object"||n("Failed to register mod: Expected info object, got "+typeof e),typeof e.name=="string"&&e.name||n("Failed to register mod: Expected name to be non-empty string, got "+typeof e.name);let s=`'${e.name}'`;typeof e.fullName=="string"&&e.fullName||n(`Failed to register mod ${s}: Expected fullName to be non-empty string, got ${typeof e.fullName}`),s=`'${e.fullName} (${e.name})'`,typeof e.version!="string"&&n(`Failed to register mod ${s}: Expected version to be string, got ${typeof e.version}`),e.repository||(e.repository=void 0),e.repository!==void 0&&typeof e.repository!="string"&&n(`Failed to register mod ${s}: Expected repository to be undefined or string, got ${typeof e.version}`),a==null&&(a={}),a&&typeof a=="object"||n(`Failed to register mod ${s}: Expected options to be undefined or object, got ${typeof a}`);let v=a.allowReplace===!0,S=I.get(e.name);S&&(S.allowReplace&&v||n(`Refusing to load mod ${s}: it is already loaded and doesn't allow being replaced.
Was the mod loaded multiple times?`),j(S));let p=o=>{typeof o=="string"&&o||n(`Mod ${s} failed to patch a function: Expected function name string, got ${typeof o}`);let d=l.patching.get(o);return d||(d={hooks:[],patches:new Map},l.patching.set(o,d)),d},m={unload:()=>j(l),hookFunction:(o,d,h)=>{l.loaded||n(`Mod ${s} attempted to call SDK function after being unloaded`);let b=p(o);typeof d!="number"&&n(`Mod ${s} failed to hook function '${o}': Expected priority number, got ${typeof d}`),typeof h!="function"&&n(`Mod ${s} failed to hook function '${o}': Expected hook function, got ${typeof h}`);let w={mod:l.name,priority:d,hook:h};return b.hooks.push(w),M(),()=>{let T=b.hooks.indexOf(w);T>=0&&(b.hooks.splice(T,1),M())}},patchFunction:(o,d)=>{l.loaded||n(`Mod ${s} attempted to call SDK function after being unloaded`);let h=p(o);u(d)||n(`Mod ${s} failed to patch function '${o}': Expected patches object, got ${typeof d}`);for(let[b,w]of Object.entries(d))typeof w=="string"?h.patches.set(b,w):w===null?h.patches.delete(b):n(`Mod ${s} failed to patch function '${o}': Invalid format of patch '${b}'`);M()},removePatches:o=>{l.loaded||n(`Mod ${s} attempted to call SDK function after being unloaded`),p(o).patches.clear(),M()},callOriginal:(o,d,h)=>(l.loaded||n(`Mod ${s} attempted to call SDK function after being unloaded`),typeof o=="string"&&o||n(`Mod ${s} failed to call a function: Expected function name string, got ${typeof o}`),Array.isArray(d)||n(`Mod ${s} failed to call a function: Expected args array, got ${typeof d}`),function(b,w,T=window){return k(b).original.apply(T,w)}(o,d,h)),getOriginalHash:o=>(typeof o=="string"&&o||n(`Mod ${s} failed to get hash: Expected function name string, got ${typeof o}`),k(o).originalHash)},l={name:e.name,fullName:e.fullName,version:e.version,repository:e.repository,allowReplace:v,api:m,loaded:!0,patching:new Map};return I.set(e.name,l),Object.freeze(m)}function ee(){let e=[];for(let a of I.values())e.push({name:a.name,fullName:a.fullName,version:a.version,repository:a.repository});return e}let F,K=function(){if(window.bcModSdk===void 0)return window.bcModSdk=function(){let e={version:t,apiVersion:1,registerMod:Q,getModsInfo:ee,getPatchingInfo:x,errorReporterHooks:Object.seal({hookEnter:null,hookChainExit:null})};return F=e,Object.freeze(e)}();if(u(window.bcModSdk)||n("Failed to init Mod SDK: Name already in use"),window.bcModSdk.apiVersion!==1&&n(`Failed to init Mod SDK: Different version already loaded ('1.1.0' vs '${window.bcModSdk.version}')`),window.bcModSdk.version!==t&&(alert(`Mod SDK warning: Loading different but compatible versions ('1.1.0' vs '${window.bcModSdk.version}')
One of mods you are using is using an old version of SDK. It will work for now but please inform author to update`),window.bcModSdk.version.startsWith("1.0.")&&window.bcModSdk._shim10register===void 0)){let e=window.bcModSdk,a=Object.freeze(Object.assign(Object.assign({},e),{registerMod:(r,s,v)=>r&&typeof r=="object"&&typeof r.name=="string"&&typeof r.version=="string"?e.registerMod(r.name,r.version,typeof s=="object"&&!!s&&s.allowReplace===!0):e.registerMod(r,s,v),_shim10register:!0}));window.bcModSdk=a}return window.bcModSdk}();return typeof L<"u"&&(Object.defineProperty(L,"__esModule",{value:!0}),L.default=K),K}()});function A(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}function _(t,n=3e3){ServerBeep={Timer:CommonTime()+n,Message:t}}function B(t,n="#6e6eff54",i,u){let c=document.createElement("div");c.setAttribute("class","ChatMessage ChatMessageLocalMessage"),c.setAttribute("data-time",ChatRoomCurrentTime()),c.setAttribute("data-sender",`${u??Player.MemberNumber??0}`),c.style.background=n,c.style.margin="0.15em 0",typeof t=="string"?c.innerText="[AES] "+t:c.appendChild("[AES] "+t),i&&setTimeout(()=>{y()},i);function y(){c.remove()}let f=document.activeElement?.id==="InputChat",E=ElementIsScrolledToEnd("TextAreaChatLog"),C=document.getElementById("TextAreaChatLog");return C!=null?(C.appendChild(c),E&&ElementScrollToEnd("TextAreaChatLog"),f&&ElementFocus("InputChat"),c):null}var X=le(z());var R={PLANT:"plantEvent"},g={INIT:"INIT",IN_PROGRESS:"IN_PROGRESS",PAUSED:"PAUSED",COMPLETED:"COMPLETED",STOP:"STOP",FAILED:"FAILED"};var $;var D=g.PAUSED;var de=5;var W={ItemHead:0,ItemMouth:0,ItemMouth2:0,ItemMouth3:0,ItemNeck:0,ItemArms:0,ItemPelvis:0,ItemTorso:0,ItemTorso2:0,ItemLegs:0,ItemFeet:0,ItemBoots:0};function O(t){$===void 0&&(console.log("AES: A plant invasion has started"),B("A plant invasion has started"),D=g.INIT,$=setInterval(function(){ue()},de*1e3),t&&V(g.INIT))}function N(){D=g.STOP,console.log("AES: A plant invasion has finished"),B("The plant invasion has finished"),clearInterval($);for(var t in W)W[t]=0;$=null,V(g.STOP)}function U(t){switch(t){case g.INIT:O(!1),console.log("Evento PLANT iniciado");break;case g.IN_PROGRESS:break;case g.PAUSED:console.log("Evento PLANT pausado");break;case g.COMPLETED:console.log("Evento PLANT completado");break;case g.STOP:N(),console.log("Evento PLANT detenido");break;case g.FAILED:N(),console.log("Evento PLANT fallido");break;default:console.error("Estado no reconocido para el evento PLANT:",t)}}function V(t){if(console.error("2 ",g[t]),g[t]){let n={event:R.PLANT,state:g[t]};Y(n)}else console.error("[AES] wrong state for event: ",t)}function ue(){switch(D){case g.INIT:case g.IN_PROGRESS:break;default:break}}var pe=X.default.registerMod({name:"AES",fullName:"Ainaras Event Mod",version:"0.0.1",repository:"https://github.com/ainaradev7/AES"});function P(t,n,i,u=null){return me(t,n,i,u)}function me(t,n,i,u=null){let c=pe.hookFunction(t,n,i)}function Y(t,n=null){ServerSend("ChatRoomChat",{Content:"AESMsg",Type:"Hidden",Dictionary:t})}P("ChatRoomMessage",10,(t,n)=>{let i=t[0];if(i?.Type==="Hidden"&&i.Content==="AESMsg"&&typeof i.Sender=="number"){if(console.log("OWN MESSAGE ${data.sender} and ${message} from "+i.Sender),console.log(i.Dictionary),i.Sender===Player.MemberNumber)return;if(!A(i.Dictionary)){console.warn("AES: Hidden message no Dictionary",i);return}if(i.sender===Player.MemberNumber)return;let{event:u,state:c}=i.Dictionary;if(typeof u=="string"&&typeof c=="string"){switch(u){case R.PLANT:U(c);break;default:console.error("Evento no reconocido:",u)}console.log(`Received some data from AES from ${i.Sender}`);return}return n(t)}});function H(t,n="btn",i="white",u=50,c=50){var y=document.getElementById("MainCanvas"),f=document.createElement("div");f.textContent=n,f.style.backgroundColor=i,f.style.width="40px",f.style.height="40px",f.style.position="absolute";var E=y.getBoundingClientRect();f.style.left=E.left+u+"px",f.style.top=E.top+c+"px",f.addEventListener("click",function(){t()}),y.appendChild(f),document.body.appendChild(f)}function q(){fe("https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"),H(()=>{O(!0)},"start","green",50,50),H(()=>{N()},"stop","red",100,50)}function fe(t){let n=document.createElement("script");n.src=t,document.head.appendChild(n)}var Z="M497.679,53.348c-9.285-10.52-22.496-16.551-36.246-16.551h-47.01c-2.358-33.432-25.059-28.785-33.9-28.785 c-9.33,0-124.522,0-124.522,0s-115.191,0-124.521,0c-8.842,0-31.547-4.646-33.904,28.785h-47.01 c-13.748,0-26.959,6.033-36.246,16.551C3.064,66.1-1.793,84.503,0.594,105.255c0.442,9.219,5.098,56.574,54.09,90.256 c24.898,17.117,48.828,25.844,70.598,30.285c4.771,1.031,9.598,1.957,14.545,2.68c0.068,0.076,0.135,0.154,0.205,0.229 c101.859,107.191,89.42,45.18,89.42,143.435c0,38.092-52.771,25.762-52.771,55c0,29.236-41.129,5.174-37.322,39.863 c2.332,21.264,65.318,37.205,116.644,37.205c51.322,0,114.312-15.942,116.644-37.205c3.805-34.689-37.326-10.627-37.326-39.863 c0-29.238-52.768-16.908-52.768-55c0-98.256-12.44-36.244,89.42-143.435c0.14-0.149,0.27-0.307,0.41-0.457 c25.365-3.285,54.457-11.779,84.938-32.736c48.988-33.682,53.644-81.037,54.086-90.256 C513.794,84.503,508.935,66.098,497.679,53.348z M471.214,101.165l-0.184,0.992l0.025,1.353 c-0.096,2.625-2.006,34.916-36.621,58.715c-9.467,6.51-18.627,11.444-27.535,15.276c-2.014,0.816-4.024,1.633-6.084,2.344 c12.162-34.25,14.137-72.558,14.172-102.654h46.445c1.558,0,3.857,0.502,5.965,2.888C470.99,84.149,472.382,91.833,471.214,101.165 z M227.514,204.143c-3.805,4.799-9.436,7.299-15.117,7.299c-4.198,0-8.424-1.363-11.967-4.174 c-48.381-38.371-52.434-91.045-52.434-137.404c0-10.646,8.633-19.277,19.279-19.277c10.646,0,19.277,8.631,19.277,19.277 c0,40.676,2.895,79.482,37.836,107.195C232.73,183.676,234.129,195.802,227.514,204.143z M77.566,162.225 c-34.584-23.777-36.524-56.029-36.623-58.707l0.022-0.92l-0.18-1.434c-1.168-9.33,0.224-17.016,3.818-21.086 c2.108-2.386,4.406-2.888,5.963-2.888h46.445c0.031,25.693,1.533,57.357,9.52,87.386c1.332,5.178,2.808,10.326,4.543,15.385 C100.31,175.89,89.16,170.196,77.566,162.225z";function J(){P("ChatRoomDrawCharacterOverlay",0,(t,n)=>{n(t);let[i,u,c,y]=t,f=i.ID===0||(Player.FriendList??[]).includes(i.MemberNumber),E=(Player.GhostList??[]).includes(i.MemberNumber),k=document.getElementById("MainCanvas").getContext("2d");E||he(k,Z,u+390*y,c+75,3.5*y,3.5*y,50,.5,3,"#6e6eff")})}function he(t,n,i,u,c,y,f,E,C,k,M="black"){t.save(),t.globalAlpha=E,t.translate(i,u),t.scale(c/f,y/f),t.fillStyle=k,M&&(t.strokeStyle=M),t.lineWidth=C;let x=new Path2D(n);t.fill(x),M&&t.stroke(x),t.restore()}function ge(){console.log("AES: Initiated"),P("LoginResponse",0,(t,n)=>{console.debug("AES: Init LoginResponse caught",t),n(t);let i=t[0];A(i)&&typeof i.Name=="string"&&i.AccountName}),_("AES Ready!"),console.log("[AES] initiated"),q(),J(),console.debug("BCX: Already logged in, init")}ge();})();
